<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename='images/Logo3.png') }}" />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        margin: 0;
        background: #f9fff6;
        color: #2c2c2c;
      }
      header {
        background: #4caf50;
        color: white;
        padding: 15px 20px;
        text-align: center;
        font-size: 22px;
        font-weight: bold;
        position: relative;
      }
      .back-btn {
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        background: white;
        color: #4caf50;
        border: none;
        padding: 6px 12px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
      }
      .back-btn:hover {
        background: #f1f1f1;
      }
      .container {
        padding: 20px;
      }
      h2, h3 {
        margin-top: 30px;
        color: #4caf50;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }
      th, td {
        padding: 12px;
        border-bottom: 1px solid #e5e5e5;
        text-align: left;
      }
      th {
        background: #4caf50;
        color: white;
      }
      .btn {
        padding: 6px 12px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        transition: 0.2s ease;
        margin: 2px;
        text-decoration: none;
        display: inline-block;
      }
      .btn.edit {
        background: #ffc107;
        color: #2c2c2c;
      }
      .btn.delete {
        background: #d72638;
        color: white;
      }
      .btn.add {
        background: #4caf50;
        color: white;
        font-weight: bold;
      }
      .btn.report {
        background: #2196f3;
        color: white;
        font-weight: bold;
      }
      .btn:hover {
        opacity: 0.9;
        transform: scale(1.05);
      }
      form {
        display: inline;
      }
      .flash-messages {
        margin: 20px auto;
        max-width: 800px;
      }
      .flash {
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 15px;
        text-align: center;
        font-size: 14px;
      }
      .flash.success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .flash.danger {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .report-buttons {
        margin-top: 30px;
      }
    </style>
  </head>
  <body>
    <header>
      <button class="back-btn" onclick="window.history.back()">â¬… Back</button>
      Welcome, Admin | Admin Dashboard
    </header>

    <div class="container">
      <!-- Flash Messages -->
      <div class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
        {% endif %}
        {% endwith %}
      </div>

      <!-- User Management -->
      <h2>User Management</h2>
      <table>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Phone</th>
          <th>Actions</th>
        </tr>
        {% for user in users %}
        <tr>
          <td>{{ user.id }}</td>
          <td>{{ user.name }}</td>
          <td>{{ user.phone }}</td>
          <td>
            <form method="POST" action="{{ url_for('admin_delete_user', user_id=user.id) }}">
              <button class="btn delete" type="submit">Delete</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </table>

      <!-- Menu Management -->
      <h2>Menu Management</h2>
      <table>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Price</th>
          <th>Image</th>
          <th>Actions</th>
        </tr>
        {% for item in menu_items %}
        <tr>
          <td>{{ item.id }}</td>
          <td>
            <form method="POST" action="{{ url_for('admin_edit_menu', item_id=item.id) }}">
              <input type="text" name="name" value="{{ item.name }}" />
          </td>
          <td>
              <input type="number" step="0.01" name="price" value="{{ item.price }}" />
          </td>
          <td>
              <input type="text" name="image" value="{{ item.image }}" />
          </td>
          <td>
              <button class="btn edit" type="submit">Save</button>
            </form>
            <form method="POST" action="{{ url_for('admin_delete_menu', item_id=item.id) }}">
              <button class="btn delete" type="submit">Delete</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </table>

      <!-- Add new menu item -->
      <h3>Add New Menu Item</h3>
      <form method="POST" action="{{ url_for('admin_add_menu') }}">
        <input type="text" name="name" placeholder="Item name" required />
        <input type="text" name="category" placeholder="Category" required />
        <input type="number" step="0.01" name="price" placeholder="Price" required />
        <input type="text" name="image" placeholder="Image filename" />
        <button class="btn add" type="submit">âž• Add Item</button>
      </form>

      <!-- Generate Reports -->
      <h2>Generate Reports</h2>
      <div class="report-buttons">
        <a href="{{ url_for('admin_day_report') }}" class="btn report">ðŸ“… Download Day-wise Report</a>
        <a href="{{ url_for('admin_report_month') }}" class="btn report">ðŸ“† Download Month-wise Report</a>
      </div>
    </div>
  </body>
</html>
